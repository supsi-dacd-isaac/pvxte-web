{% extends 'base.html' %}

{% block content %}
    {% if 'username' in session.keys() and session['username'] != '' %}
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <ul class="navbar-nav">
              <li class="nav-item active">
                <a class="nav-link"><h3>{{ company }} management section:</h3></a>
              </li>
        </ul>
    </nav>
    <div>
        <table class="table-sm-list">
        <thead>
            <tr>
                <td colspan="6"><h3>Buses models list</h3></td>
                <td colspan="1"><a class="nav-link" href="{{ url_for('new_bus_model') }}">Add new</span></a></td>
            </tr>
        </thead>
        <thead>
            <tr>
                <td>Name</td>
                <td>Length</td>
                <td>Cost</td>
<!--                <td>Passengers capacity</td>-->
                <td>Battery pack capacity</td>
                <td>Minimum required packs</td>
                <td>Maximum allowed packs</td>
<!--                <td>Empty weight of a bus without battery</td>-->
<!--                <td>Weight of a battery pack</td>-->
                <td></td>
            </tr>
        </thead>
        {% for bus_model in buses_models %}
            <tbody>
                <tr>
                    <td><a class="link-dark" href="{{ url_for('edit_bus_model', id_bus_model=bus_model['id']) }}">{{ bus_model['name'] }}</a></td>
                    <td>{{ bus_model['length'] }} m</td>
                    <td>{{ bus_model['cost'][0:-3] }} kCHF</td>
<!--                    <td>{{ bus_model['max_pass_cap'] }}</td>-->
                    <td>{{ bus_model['batt_pack_capacity'] }} kWh</td>
                    <td>{{ bus_model['min_required_batt_packs'] }}</td>
                    <td>{{ bus_model['max_allowed_batt_packs'] }}</td>
<!--                    <td>{{ bus_model['empty_bus_weight'] }}</td>-->
<!--                    <td>{{ bus_model['batt_pack_weight'] }}</td>-->
                    <td>
                        <a class="link-dark" href="{{ url_for('buses_models_list', id_bus_model=bus_model['id'], del='y') }}" onclick="return confirm('Are you sure you want to delete the bus model?')">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-eraser" viewBox="0 0 16 16">
                                <path d="M8.086 2.207a2 2 0 0 1 2.828 0l3.879 3.879a2 2 0 0 1 0 2.828l-5.5 5.5A2 2 0 0 1 7.879 15H5.12a2 2 0 0 1-1.414-.586l-2.5-2.5a2 2 0 0 1 0-2.828l6.879-6.879zm2.121.707a1 1 0 0 0-1.414 0L4.16 7.547l5.293 5.293 4.633-4.633a1 1 0 0 0 0-1.414l-3.879-3.879zM8.746 13.547 3.453 8.254 1.914 9.793a1 1 0 0 0 0 1.414l2.5 2.5a1 1 0 0 0 .707.293H7.88a1 1 0 0 0 .707-.293l.16-.16z"/>
                            </svg>
                        </a>
                    </td>
                </tr>
            </tbody>
        {% endfor %}
        </table>
    </div>
    <br><br>
    <div>
    <form method="post" enctype = "multipart/form-data">
        <fieldset>
            <table class="table-sm-form">
                <thead>
                    <tr>
                        <td colspan="3" align="center"><h3>Company setup:</h3></td>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Terminals file:</td>
                        <td></td>
                        <td><input class="form-control" type="file" name="terminals_file" /></td>
                    </tr>
                    <tr>
                        <td>Distances file:</td>
                        <td></td>
                        <td><input class="form-control" type="file" name="distances_file" /></td>
                    </tr>
                    <tr>
                        <td colspan="3" align="center"><button type="submit" class="btn btn-dark">Upload terminal and distances files</button></td>
                    </tr>
                </tbody>
            </table>
        </fieldset>
    </form>
    </div>

    <br><br>
    <div>
        <table class="table-sm-list">
        <thead>
            <tr>
                <td colspan="3"><h3>Terminals section:</h3></td>
            </tr>
        </thead>
    {% if terminals_data|length > 0 %}
            <thead>
                <tr>
                    <td>Name</td>
                    <td>Elevation [m]</td>
                    <td>Charging station</td>
                </tr>
            </thead>
            {% for terminal_data in terminals_data %}
                <tbody>
                    <tr>
                        <td>{{ terminal_data['name'] }}</td>
                        <td>{{ terminal_data['elevation']|int }}</td>
                        <td>{% if terminal_data['is_charging_station']|int == 1 %} YES {% endif %}</td>
                    </tr>
                </tbody>
            {% endfor %}
    {% else %}
        <tbody>
            <tr>
                <td colspan="2"><b>No data available</b></td>
            </tr>
        </tbody>
    {% endif %}
        </table>
    </div>

    {% endif %}

{% endblock %}