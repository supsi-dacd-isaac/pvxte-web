{% extends 'base.html' %}

{% block content %}
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <ul class="navbar-nav">
              <li class="nav-item active">
                <a class="nav-link"><h3>New simulation - step2</h3></a>
              </li>
        </ul>
    </nav>
    <form method="post" enctype = "multipart/form-data">
        <input type="hidden" class="form-control-sm" name="data_file" value="{{ data_file }}">
        <input type="hidden" class="form-control-sm" name="bus_model_id" value="{{ bus_model_data['id'] }}">
        <input type="hidden" class="form-control-sm" name="bus_model_code" value="{{ bus_model_data['code'] }}">
        <input type="hidden" class="form-control-sm" name="bus_model_name" value="{{ bus_model_data['name'] }}">
        <fieldset>
            <table class="table-sm-form">
                <tbody>
                    <tr>
                        <td>Bus model</td>
                        <td>{{ bus_model_data['name'] }}</td>
                    </tr>
                    <tr>
                        <td>Lines</td>
                        <td>
                            <table class="table-sm-form">
                                <tbody>
                                    {% for line in lines %}
                                        <tr>
                                            <td>{{ line }}</td>
                                            <td><input type="checkbox" id="line_{{ line }}" name="line_{{ line }}"></td>
                                        </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                        </td>
                    </tr>
                    <tr>
                        <td>Day type</td>
                        <td>
                            <select class="form-select" name="day_type">
                                {% for day_type in days_types %}
                                    <option value="{{day_type}}">{{ day_type }}</option>
                                {% endfor %}
                            </select>
                        </td>
                    </tr>
                    <tr>
                        <td>Pantograph maximum charging power</td>
                        <td><input type="text" class="form-control-sm" name="p_max" value="450">&nbsp[kW]</td>
                    </tr>
                    <tr>
                        <td>Maximum charging power at deposit</td>
                        <td><input type="text" class="form-control-sm" name="pd_max" value="150">&nbsp[kW]</td>
                    </tr>
                    <tr>
                        <td colspan="2" align="center"><b>CAPEX section</b></td>
                    </tr>
                    <tr>
                        <td>Bus cost</td>"
                        <td><input type="text" class="form-control-sm" name="capex_bus_cost" value={{ default_costs['bus'] }}>&nbsp[CHF/bus]</td>
                    </tr>                    <tr>
                    <td>Bus lifetime</td>
                        <td><input type="text" class="form-control-sm" name="capex_bus_lifetime" value="12">&nbsp[years]</td>
                    </tr>
                    <tr>
                        <td>Battery cost</td>
                        <td><input type="text" class="form-control-sm" name="capex_battery_cost" value="{{ default_costs['battery'] }}">&nbsp[CHF/battery]</td>
                    </tr>
                    <td>Battery lifetime</td>
                        <td><input type="text" class="form-control-sm" name="capex_battery_lifetime" value="6">&nbsp[years]</td>
                    </tr>
                    <tr>
                        <td>Charger cost</td>
                        <td><input type="text" class="form-control-sm" name="capex_charger_cost" value="{{ default_costs['charger'] }}">&nbsp[CHF/charger]</td>
                    </tr>
                    <td>Charger lifetime</td>
                        <td><input type="text" class="form-control-sm" name="capex_charger_lifetime" value="10">&nbsp[years]</td>
                    </tr>
                    <tr>
                        <td>Connection cost</td>
                        <td><input type="text" class="form-control-sm" name="capex_additional_fee" value="{{ default_costs['connection_fee'] }}">&nbsp[CHF/charger]</td>
                    </tr>
                    <tr>
                        <td>Interest rate</td>
                        <td><input type="text" class="form-control-sm" name="capex_interest_rate" value="3">&nbsp[%]</td>
                    </tr>
<!--                    <tr>-->
<!--                        <td>Buses number</td>-->
<!--                        <td><input type="text" class="form-control-sm" name="capex_number_buses" value="1"></td>-->
<!--                    </tr>-->
<!--                    <tr>-->
<!--                        <td>Chargers number</td>-->
<!--                        <td><input type="text" class="form-control-sm" name="capex_number_chargers" value="1"></td>-->
<!--                    </tr>-->
                    <tr>
                        <td colspan="2" align="center"><b>OPEX section</b></td>
                    </tr>
                    <tr>
                        <td>Buses efficiency</td>
                        <td><input type="text" class="form-control-sm" name="opex_buses_efficiency" value="1.15">&nbsp[kWh/km]</td>
                    </tr>
                    <tr>
                        <td>Buses maintainance</td>
                        <td><input type="text" class="form-control-sm" name="opex_buses_maintainance" value="0.21">&nbsp[CHF/km]</td>
                    </tr>
                    <tr>
                        <td>Charging efficiency</td>
                        <td><input type="text" class="form-control-sm" name="opex_charging_efficiency" value="2">&nbsp[%]</td>
                    </tr>
                    <tr>
                        <td>Annual usage per single bus</td>
                        <td><input type="text" class="form-control-sm" name="opex_annual_usage" value="100000">&nbsp[Km/year]</td>
                    </tr>
                    <tr>
                        <td>Energy tariff</td>
                        <td><input type="text" class="form-control-sm" name="opex_energy_tariff" value="0.3">&nbsp[CHF/kWh]</td>
                    </tr>
                    <tr>
                        <td>Energy tariff increase per year</td>
                        <td><input type="text" class="form-control-sm" name="opex_energy_tariff_yearly_increase" value="1">&nbsp[%]</td>
                    </tr>
                    <tr>
                        <td>Power tariff</td>
                        <td><input type="text" class="form-control-sm" name="opex_power_tariff" value="0">&nbsp[CHF/kW]</td>
                    </tr>
                    <tr>
                        <td colspan="2" align="center"><button type="submit" class="btn btn-dark" onclick="return confirm('You are launching a new simulation! Are you sure? The running of a simulation can take several minutes depending on the input, you will receive a notification via email when it will be completed')">Launch Simulation</button></td>
                    </tr>
                </tbody>
            </table>
        </fieldset>
    </form>
  {% if error %}
    <br>
    <a class="nav-link"><h3><strong>Error:</strong> {{ error }}</h3></a>
  {% endif %}


{% endblock %}


